@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   FORMA — CLEAN PREMIUM DESIGN SYSTEM
   Light, card-based, WHOOP-inspired
   ============================================ */

@layer base {
  :root {
    --background: 210 20% 98%;
    --foreground: 220 20% 10%;

    --card: 0 0% 100%;
    --card-foreground: 220 20% 10%;

    --popover: 0 0% 100%;
    --popover-foreground: 220 20% 10%;

    /* Primary — Teal (energy, health, progress) */
    --primary: 174 72% 40%;
    --primary-foreground: 0 0% 100%;

    /* Secondary — Slate-purple (premium tier accent) */
    --secondary: 250 40% 55%;
    --secondary-foreground: 0 0% 100%;

    /* Accent — Green (success, achievement) */
    --accent: 152 60% 42%;
    --accent-foreground: 0 0% 100%;

    --muted: 220 14% 94%;
    --muted-foreground: 220 10% 46%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 98%;

    --border: 220 13% 90%;
    --input: 220 14% 94%;
    --ring: 174 72% 40%;

    --radius: 0.75rem;

    /* Brand palette (light) */
    --orange: 25 95% 53%;
    --pink: 330 80% 55%;
  }

  .dark {
    --background: 220 20% 4%;
    --foreground: 210 20% 98%;

    --card: 220 20% 7%;
    --card-foreground: 210 20% 98%;

    --popover: 220 20% 8%;
    --popover-foreground: 210 20% 98%;

    --primary: 174 72% 50%;
    --primary-foreground: 220 20% 4%;

    --secondary: 250 50% 65%;
    --secondary-foreground: 0 0% 100%;

    --accent: 152 70% 50%;
    --accent-foreground: 220 20% 4%;

    --muted: 220 15% 12%;
    --muted-foreground: 220 10% 55%;

    --destructive: 0 72% 55%;
    --destructive-foreground: 0 0% 98%;

    --border: 220 15% 15%;
    --input: 220 15% 12%;
    --ring: 174 72% 50%;

    --orange: 25 100% 55%;
    --pink: 330 100% 65%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    color-scheme: light;
  }

  html.dark {
    color-scheme: dark;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

/* ============================================
   TYPOGRAPHY
   ============================================ */

h1, h2, h3, h4, h5, h6 {
  @apply font-bold tracking-tight;
}

/* Legacy gradient text — used in other pages, kept for compat */
.text-gradient {
  background: linear-gradient(135deg, hsl(var(--primary)), hsl(174 72% 50%));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* RTL Arabic body text */
[dir="rtl"] body,
[dir="rtl"] p,
[dir="rtl"] span,
[dir="rtl"] li {
  font-family: 'Cairo', sans-serif;
  line-height: 1.8;
  letter-spacing: -0.01em;
}

/* ============================================
   SCROLLBAR
   ============================================ */

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.2);
  border-radius: 100px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.4);
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

.text-balance {
  text-wrap: balance;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

/* ============================================
   ANIMATIONS
   ============================================ */

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeDown {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes ringProgress {
  from { stroke-dashoffset: var(--ring-circumference); }
  to { stroke-dashoffset: var(--ring-offset); }
}

.animate-fade-up {
  animation: fadeUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-fade-down {
  animation: fadeDown 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-fade-in {
  animation: fadeIn 0.4s ease-out forwards;
}

.animate-scale-in {
  animation: scaleIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-shimmer {
  background: linear-gradient(
    90deg,
    hsl(var(--muted)) 0%,
    hsl(var(--muted-foreground) / 0.08) 50%,
    hsl(var(--muted)) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.animate-ring-progress {
  animation: ringProgress 1s ease-out forwards;
}

/* Animation delays */
.delay-75 { animation-delay: 75ms; }
.delay-100 { animation-delay: 100ms; }
.delay-150 { animation-delay: 150ms; }
.delay-200 { animation-delay: 200ms; }
.delay-300 { animation-delay: 300ms; }
.delay-400 { animation-delay: 400ms; }
.delay-500 { animation-delay: 500ms; }

/* ============================================
   BUTTON STYLES
   ============================================ */

.btn-primary {
  @apply inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold text-white transition-all duration-200;
  background: hsl(var(--primary));
}

.btn-primary:hover {
  background: hsl(var(--primary) / 0.9);
  box-shadow: 0 4px 12px hsl(var(--primary) / 0.25);
}

.btn-primary:active {
  @apply scale-[0.98];
}

.btn-secondary {
  @apply inline-flex items-center justify-center rounded-xl border-2 border-primary/40 px-6 py-3 font-semibold text-primary transition-all duration-200;
  background: hsl(var(--primary) / 0.05);
}

.btn-secondary:hover {
  @apply border-primary;
  background: hsl(var(--primary) / 0.1);
}

.btn-ghost {
  @apply inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold text-foreground transition-all duration-200;
}

.btn-ghost:hover {
  @apply bg-muted;
}

/* ============================================
   CARD STYLES
   ============================================ */

.card-base {
  @apply rounded-2xl border border-border bg-card p-6 transition-all duration-200;
}

.card-base:hover {
  @apply shadow-md;
}

/* Premium white card — the main card pattern */
.card-premium {
  @apply rounded-2xl bg-white border border-border/60 p-6 transition-all duration-200;
  box-shadow: 0 1px 3px hsl(220 15% 10% / 0.04), 0 1px 2px hsl(220 15% 10% / 0.03);
}

.card-premium:hover {
  box-shadow: 0 4px 12px hsl(220 15% 10% / 0.08), 0 1px 3px hsl(220 15% 10% / 0.04);
}

.dark .card-premium {
  @apply bg-card;
}

/* Card with colored left accent stripe */
.card-accent-left {
  @apply rounded-2xl bg-white border border-border/60 p-5 transition-all duration-200;
  box-shadow: 0 1px 3px hsl(220 15% 10% / 0.04);
  border-inline-start: 3px solid;
}

.dark .card-accent-left {
  @apply bg-card;
}

/* Legacy compat — card-glow now maps to card-premium behavior */
.card-glow {
  @apply rounded-2xl border border-border/60 bg-card p-6 transition-all duration-200;
  box-shadow: 0 1px 3px hsl(220 15% 10% / 0.04);
}

.card-glow:hover {
  box-shadow: 0 4px 12px hsl(220 15% 10% / 0.08);
}

/* Stat card — clean white with subtle bg */
.stat-card {
  @apply relative rounded-2xl bg-white border border-border/60 p-5 transition-all duration-200;
  box-shadow: 0 1px 3px hsl(220 15% 10% / 0.04);
}

.stat-card:hover {
  box-shadow: 0 4px 12px hsl(220 15% 10% / 0.08);
}

.dark .stat-card {
  @apply bg-card;
}

/* Glass — very subtle, barely-there blur */
.glass {
  @apply bg-white/95 border border-border/60;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  box-shadow: 0 1px 3px hsl(220 15% 10% / 0.04);
}

.dark .glass {
  background: hsl(var(--card) / 0.95);
}

/* ============================================
   INPUT STYLES
   ============================================ */

.input-base {
  @apply w-full rounded-xl border border-border bg-white px-4 py-3 text-foreground transition-all duration-200 placeholder:text-muted-foreground;
}

.input-base:focus {
  @apply border-primary/50 outline-none;
  box-shadow: 0 0 0 3px hsl(var(--primary) / 0.1);
}

.dark .input-base {
  @apply bg-muted/50;
}

/* ============================================
   BADGE STYLES
   ============================================ */

.badge {
  @apply inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold;
}

.badge-primary {
  background: hsl(var(--primary) / 0.1);
  color: hsl(var(--primary));
}

.badge-secondary {
  background: hsl(var(--secondary) / 0.1);
  color: hsl(var(--secondary));
}

.badge-accent {
  background: hsl(var(--accent) / 0.1);
  color: hsl(var(--accent));
}

.badge-muted {
  @apply bg-muted text-muted-foreground;
}

/* ============================================
   PROGRESS STYLES
   ============================================ */

.progress-bar {
  @apply h-2 w-full overflow-hidden rounded-full;
  background: hsl(var(--muted));
}

.progress-fill {
  @apply h-full rounded-full transition-all duration-700 ease-out;
  background: hsl(var(--primary));
}

.progress-fill-accent {
  @apply h-full rounded-full transition-all duration-700 ease-out;
  background: hsl(var(--accent));
}

/* Circular progress ring */
.progress-ring {
  transform: rotate(-90deg);
}

.progress-ring-bg {
  stroke: hsl(var(--muted));
}

.progress-ring-fill {
  stroke: hsl(var(--primary));
  stroke-linecap: round;
  transition: stroke-dashoffset 1s ease-out;
}

/* ============================================
   AVATAR STYLES
   ============================================ */

.avatar {
  @apply relative overflow-hidden rounded-full bg-muted;
}

.avatar img {
  @apply h-full w-full object-cover;
}

.avatar-ring {
  @apply ring-2 ring-primary ring-offset-2 ring-offset-background;
}

/* ============================================
   NAVIGATION STYLES
   ============================================ */

.nav-link {
  @apply relative px-4 py-2 text-sm font-medium text-muted-foreground transition-colors duration-200;
}

.nav-link:hover {
  @apply text-foreground;
}

.nav-link.active {
  @apply text-primary;
}

/* Mobile bottom nav — clean white */
.bottom-nav {
  @apply fixed bottom-0 left-0 right-0 z-50 border-t border-border bg-white;
  box-shadow: 0 -1px 4px hsl(220 15% 10% / 0.06);
}

.dark .bottom-nav {
  @apply bg-card;
}

.bottom-nav-item {
  @apply flex flex-col items-center gap-1 py-2 text-xs text-muted-foreground transition-colors;
}

.bottom-nav-item.active {
  @apply text-primary font-medium;
}

/* Bottom nav premium (used in app-shell) */
.bottom-nav-premium {
  @apply fixed bottom-0 left-0 right-0 z-50 border-t border-border bg-white safe-bottom;
  box-shadow: 0 -1px 4px hsl(220 15% 10% / 0.06);
}

.dark .bottom-nav-premium {
  @apply bg-card;
}

.bottom-nav-inner {
  @apply flex items-center justify-around px-2 py-1;
}

.nav-item {
  @apply flex flex-col items-center gap-0.5 px-3 py-2 text-muted-foreground transition-colors duration-200 rounded-xl;
}

.nav-item.active {
  @apply text-primary font-medium;
}

/* FAB — solid teal circle */
.fab {
  @apply flex h-14 w-14 items-center justify-center rounded-full transition-all duration-200;
  background: hsl(var(--primary));
  box-shadow: 0 4px 14px hsl(var(--primary) / 0.35);
}

.fab:hover {
  box-shadow: 0 6px 20px hsl(var(--primary) / 0.45);
  transform: scale(1.05);
}

.fab:active {
  transform: scale(0.95);
}

/* ============================================
   LAYOUT HELPERS
   ============================================ */

.section-padding {
  @apply py-16 md:py-24 lg:py-32;
}

.container-tight {
  @apply mx-auto max-w-4xl px-4;
}

.container-wide {
  @apply mx-auto max-w-7xl px-4;
}

/* ============================================
   SAFE AREAS (Mobile)
   ============================================ */

@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .safe-bottom {
    padding-bottom: calc(env(safe-area-inset-bottom) + 0.5rem);
  }

  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
}

/* ============================================
   FOCUS STATES
   ============================================ */

.focus-ring {
  @apply outline-none ring-2 ring-primary/50 ring-offset-2 ring-offset-background;
}

/* ============================================
   RTL SUPPORT
   ============================================ */

[dir="rtl"] {
  text-align: right;
}

[dir="rtl"] .space-x-2 > :not([hidden]) ~ :not([hidden]) {
  --tw-space-x-reverse: 1;
}

[dir="rtl"] .space-x-3 > :not([hidden]) ~ :not([hidden]) {
  --tw-space-x-reverse: 1;
}

[dir="rtl"] .space-x-4 > :not([hidden]) ~ :not([hidden]) {
  --tw-space-x-reverse: 1;
}

/* ============================================
   SKELETON LOADING
   ============================================ */

.skeleton {
  @apply rounded-lg;
  background: linear-gradient(
    90deg,
    hsl(var(--muted)) 0%,
    hsl(var(--muted-foreground) / 0.05) 50%,
    hsl(var(--muted)) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* ============================================
   HEALTH DASHBOARD — WHOOP-INSPIRED
   ============================================ */

/* Recovery ring colors */
.ring-recovery-green {
  stroke: #22c55e;
}

.ring-recovery-yellow {
  stroke: #eab308;
}

.ring-recovery-red {
  stroke: #ef4444;
}

/* Strain gauge segments */
.strain-segment {
  @apply h-3 rounded-sm transition-all duration-300;
}

.strain-segment.active {
  opacity: 1;
}

.strain-segment.inactive {
  opacity: 0.15;
}

/* Sleep stage bars */
.sleep-bar {
  @apply h-6 first:rounded-s-full last:rounded-e-full transition-all duration-500;
}

/* Sparkline dots */
.sparkline-dot {
  @apply transition-all duration-200;
}

.sparkline-dot:hover {
  r: 5;
}
